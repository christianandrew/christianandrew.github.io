{"ast":null,"code":"var _jsxFileName = \"/Users/godspeed/Desktop/caglarturali.github.io/src/components/GHButton/index.tsx\";\n\n/**\n * Generic GHButton component.\n */\nimport React, { useState, useEffect } from 'react';\nimport { useLocalStorageState } from '../../hooks';\nimport ButtonLink from '../ButtonLink';\nimport { buildRecordObject, isRecordUsable } from '../../utils';\n\nconst GHButton = ({\n  resource: {\n    attr,\n    endpoint\n  },\n  timeout = 10,\n  // 10 mins\n  ...btnProps\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [attrCountRecord, setAttrCountRecord] = useLocalStorageState(attr, undefined);\n  useEffect(() => {\n    const fetchApi = async () => {\n      const response = await fetch(endpoint);\n      const json = await response.json();\n\n      if (json[attr] >= 0) {\n        setAttrCountRecord(buildRecordObject(json[attr]));\n      }\n\n      setLoading(false);\n    };\n\n    if (!isRecordUsable(attrCountRecord, timeout)) {\n      fetchApi();\n    }\n  });\n  return /*#__PURE__*/React.createElement(ButtonLink, Object.assign({}, btnProps, {\n    showCount: !loading && attrCountRecord !== undefined,\n    count: attrCountRecord.data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }));\n};\n\nexport default GHButton;","map":{"version":3,"sources":["/Users/godspeed/Desktop/caglarturali.github.io/src/components/GHButton/index.tsx"],"names":["React","useState","useEffect","useLocalStorageState","ButtonLink","buildRecordObject","isRecordUsable","GHButton","resource","attr","endpoint","timeout","btnProps","loading","setLoading","attrCountRecord","setAttrCountRecord","undefined","fetchApi","response","fetch","json","data"],"mappings":";;AAAA;AACA;AACA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,oBAAT,QAAqC,aAArC;AACA,OAAOC,UAAP,MAA4C,eAA5C;AAEA,SAASC,iBAAT,EAA4BC,cAA5B,QAAkD,aAAlD;;AASA,MAAMC,QAAmD,GAAG,CAAC;AAC3DC,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GADiD;AAE3DC,EAAAA,OAAO,GAAG,EAFiD;AAE7C;AACd,KAAGC;AAHwD,CAAD,KAItD;AACJ,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACc,eAAD,EAAkBC,kBAAlB,IAAwCb,oBAAoB,CAEhEM,IAFgE,EAE1DQ,SAF0D,CAAlE;AAIAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,QAAQ,GAAG,YAA0B;AACzC,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACV,QAAD,CAA5B;AACA,YAAMW,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAT,EAAnB;;AAEA,UAAIA,IAAI,CAACZ,IAAD,CAAJ,IAAc,CAAlB,EAAqB;AACnBO,QAAAA,kBAAkB,CAACX,iBAAiB,CAACgB,IAAI,CAACZ,IAAD,CAAL,CAAlB,CAAlB;AACD;;AAEDK,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KATD;;AAWA,QAAI,CAACR,cAAc,CAACS,eAAD,EAAkBJ,OAAlB,CAAnB,EAA+C;AAC7CO,MAAAA,QAAQ;AACT;AACF,GAfQ,CAAT;AAiBA,sBACE,oBAAC,UAAD,oBACMN,QADN;AAEE,IAAA,SAAS,EAAE,CAACC,OAAD,IAAYE,eAAe,KAAKE,SAF7C;AAGE,IAAA,KAAK,EAAEF,eAAe,CAACO,IAHzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;AAOD,CAlCD;;AAoCA,eAAef,QAAf","sourcesContent":["/**\n * Generic GHButton component.\n */\nimport React, { useState, useEffect } from 'react';\nimport { useLocalStorageState } from '../../hooks';\nimport ButtonLink, { ButtonLinkProps } from '../ButtonLink';\nimport { LocalCache } from '../../models';\nimport { buildRecordObject, isRecordUsable } from '../../utils';\n\nexport interface GHButtonProps extends ButtonLinkProps {\n  resource: {\n    endpoint: string;\n    attr: string;\n  };\n}\n\nconst GHButton: React.FC<GHButtonProps & LocalCache.Prop> = ({\n  resource: { attr, endpoint },\n  timeout = 10, // 10 mins\n  ...btnProps\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [attrCountRecord, setAttrCountRecord] = useLocalStorageState<\n    number | undefined\n  >(attr, undefined);\n\n  useEffect(() => {\n    const fetchApi = async (): Promise<any> => {\n      const response = await fetch(endpoint);\n      const json = await response.json();\n\n      if (json[attr] >= 0) {\n        setAttrCountRecord(buildRecordObject(json[attr]));\n      }\n\n      setLoading(false);\n    };\n\n    if (!isRecordUsable(attrCountRecord, timeout)) {\n      fetchApi();\n    }\n  });\n\n  return (\n    <ButtonLink\n      {...btnProps}\n      showCount={!loading && attrCountRecord !== undefined}\n      count={attrCountRecord.data}\n    />\n  );\n};\n\nexport default GHButton;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport { buildRecordObject } from '../utils';\n/**\n * Custom hook that uses local storage\n * @param key Key\n * @param defaultValue Default value\n */\n\nexport const useLocalStorageState = (key, defaultValue) => {\n  const [state, setState] = useState(() => {\n    const defaultObj = buildRecordObject(defaultValue);\n    let value;\n\n    try {\n      value = JSON.parse(window.localStorage.getItem(key) || JSON.stringify(defaultObj));\n    } catch (e) {\n      value = defaultObj;\n    }\n\n    return value;\n  });\n  useEffect(() => {\n    window.localStorage.setItem(key, JSON.stringify(state));\n  }, [state, key]);\n  return [state, setState];\n};","map":{"version":3,"sources":["/Users/godspeed/Desktop/caglarturali.github.io/src/hooks/useLocalStorageState.ts"],"names":["useState","useEffect","buildRecordObject","useLocalStorageState","key","defaultValue","state","setState","defaultObj","value","JSON","parse","window","localStorage","getItem","stringify","e","setItem"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,SAASC,iBAAT,QAAkC,UAAlC;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,oBAAoB,GAAG,CAClCC,GADkC,EAElCC,YAFkC,KAM/B;AACH,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAuB,MAAM;AAC7D,UAAMQ,UAAU,GAAGN,iBAAiB,CAACG,YAAD,CAApC;AACA,QAAII,KAAJ;;AAEA,QAAI;AACFA,MAAAA,KAAK,GAAGC,IAAI,CAACC,KAAL,CACNC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BV,GAA5B,KAAoCM,IAAI,CAACK,SAAL,CAAeP,UAAf,CAD9B,CAAR;AAGD,KAJD,CAIE,OAAOQ,CAAP,EAAU;AACVP,MAAAA,KAAK,GAAGD,UAAR;AACD;;AACD,WAAOC,KAAP;AACD,GAZiC,CAAlC;AAcAR,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4Bb,GAA5B,EAAiCM,IAAI,CAACK,SAAL,CAAeT,KAAf,CAAjC;AACD,GAFQ,EAEN,CAACA,KAAD,EAAQF,GAAR,CAFM,CAAT;AAIA,SAAO,CAACE,KAAD,EAAQC,QAAR,CAAP;AACD,CA1BM","sourcesContent":["import { useState, useEffect } from 'react';\nimport { LocalCache } from '../models';\nimport { buildRecordObject } from '../utils';\n\n/**\n * Custom hook that uses local storage\n * @param key Key\n * @param defaultValue Default value\n */\nexport const useLocalStorageState = <T>(\n  key: string,\n  defaultValue: T,\n): [\n  LocalCache.Record<T>,\n  React.Dispatch<React.SetStateAction<LocalCache.Record<T>>>,\n] => {\n  const [state, setState] = useState<LocalCache.Record<T>>(() => {\n    const defaultObj = buildRecordObject(defaultValue);\n    let value;\n\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(key) || JSON.stringify(defaultObj),\n      ) as LocalCache.Record<T>;\n    } catch (e) {\n      value = defaultObj;\n    }\n    return value;\n  });\n\n  useEffect(() => {\n    window.localStorage.setItem(key, JSON.stringify(state));\n  }, [state, key]);\n\n  return [state, setState];\n};\n"]},"metadata":{},"sourceType":"module"}